.bp-detail.skin-background
  .container-fluid
    .row
      %h3.pull-left Business Plan
      %ul.bp-filter.pull-left
        %li.title
          Quarter
        %li{ dropdown: true }
          %a{ href: '', dropdown: { toggle: true } }
            %span{ 'ng-if': 'selectedBP.id > 0' }
              {{ selectedBP.name }}
            %span{ 'ng-if': 'selectedBP.id == 0' }
              Select a quarter
            %span.caret
          %ul.dropdown-menu
            %li{ ng: { repeat: 'bp in bps | filter: { name: bpSearch }', class: '{active: bp.id == selectedBP.id}' } }
              %a{ href: '', ng: { click: 'selectBP(bp)' } }
                %span.name
                  {{ bp.name }}
                -#&nbsp;&nbsp;&nbsp;
                -#%span.status
                -#  {{bp.status}} / {{bp.client_count}}
      .bp-info.col-xs-12{ ng: { show: 'selectedBP.id > 0' } }
        .info
          .info-body-wrap
            .name
              {{ selectedBP.name }}
            .description
              Created: {{selectedBP.created_at | date: 'MMM dd, yyyy'}}
            .description
              Due Date: {{selectedBP.due_date | date: 'MMM dd, yyyy'}}
        .info
          %svg#progress-circle
          .info-body-wrap
            .info-body
              #progress-number.title
                {{totalStatus}}/{{totalClients}}
              .description Status
        .info
          .info-body-wrap
            .info-body
              .title
                {{ totalEstimate(bpEstimates, 'estimate_seller') | humanReadableMoney }}
              .description Seller Estimate
        .info
          .info-body-wrap
            .info-body
              .title
                {{ totalEstimate(bpEstimates, 'estimate_mgr') | humanReadableMoney }}
              .description Manager Estimate
        .filter.pull-right
          .filter-item{ ng: { repeat: 'filter in bpEstimateFilters', class: '{active: filter.value == selectedFilter.value}', click: 'selectFilter(filter)' } }
            {{ filter.name }}
          -#.filter-item.active
          -#  All
          -#.filter-item
          -#  My Estimates
          -#.filter-item
          -#  My Team's Estimate
    .row{ ng: { if: 'selectedBP.id > 0' } }
      .col-md-12.text-center.bp-table-wrapper
        .alerts{ 'ng-if': 'notification' }
          .alert.alert-success
            %i.fa.fa-check-circle
            <strong style="text-transform: capitalize"></strong>
            {{notification}}
        %table
          %thead
            %tr
              %th.left{ width: "200" }
                %a.sort{ href: '', ng: { click: 'sort.toggle("client_name")' } }
                  Account
                  %i{ ng: { class: "{ 'fa': sort.column == 'client_name', 'fa-sort-asc': sort.column == 'client_name' && sort.direction == 'asc', 'fa-sort-desc': sort.column == 'client_name' && sort.direction == 'desc' }" } }
              %th.left{ width: "150" }
                %a.sort{ href: '', ng: { click: 'sort.toggle("user_name")' } }
                  Seller
                  %i{ ng: { class: "{ 'fa': sort.column == 'user_name', 'fa-sort-asc': sort.column == 'user_name' && sort.direction == 'asc', 'fa-sort-desc': sort.column == 'user_name' && sort.direction == 'desc' }" } }
              %th{ width: "130" }
                {{selectedBP.time_period.name}} Pipeline
              %th{ width: "130" }
                {{selectedBP.time_period.name}} Revenue
              %th{ width: "150" }
                {{selectedBP.time_period.name}} Estimate
              %th{ width: "150" }
                Mgr Estimate
              %th{ width: "130" }
                {{yearQuarter}} Revenue
              %th{ width: "130" }
                {{'% Change - YoY'}}
              %th{ width: "130" }
                {{prevQuarter}} Revenue
              %th{ width: "130" }
                {{'% Change - QoQ'}}
          %tbody{ ng: { if: 'bpEstimates.length > 0', repeat: 'bp_estimate in bpEstimates', include: "'partials/bp_rows.html'" } }
          %tbody{ ng: { if: 'bpEstimates.length == 0' } }
            %tr
              %td.center{ colspan: '10' }
                No data available