#contacts
  #nav.transparent
    .container
      .row
        .col-xs-12
          %ul.nav.nav-tabs
            %li.pull-right.last
              %a.upload{ href: '', ng: { click: 'showUploadModal()' } }
                = inline_svg 'icons/upload.svg'
                Upload
            %li.pull-right
              %a.upload{ href: '', ng: { click: 'showModal()' } }
                = inline_svg 'icons/add.svg'
                New Contact


  -##
  -# Main content
  -##
  .container
    .row


      -##
      -# List and search
      -##
      #contact-list.col-xs-4
        %script{ type: 'text/ng-template', id: 'partials/contact_list_item.html' }
          %h4
            {{ item.name }}
          .subtitle{ 'ng-show': 'item.primary_client && item.position' }
            {{ item.primary_client.name }}, {{ item.position }}
          .subtitle{ 'ng-show': 'item.primary_client && !item.position' }
            {{ item.primary_client.name }}
          .subtitle{ 'ng-show': '!item.primary_client && item.position' }
            {{ item.position }}
        %div{ 'object-list': true, items: 'contacts', query: 'query', 'on-search': 'searchContacts', 'on-select': 'showContact', 'on-load-more': 'loadMoreContacts', selected: 'currentContact', template: 'partials/contact_list_item.html' }


      -##
      -# Detail view
      -##
      #contact-detail.col-xs-8
        .tools.pull-right
          %a#delete-contact{ href: '', ng: { click: 'delete()' } }
            = inline_svg 'icons/trash.svg'
          %a#edit-contact{ href: '', ng: { click: 'showEditModal()' } }
            = inline_svg 'icons/edit.svg'
        %h2.contact-name.icon-show-popup-wrapper
          %span.contact-name-text
            {{ currentContact.name }}
          .show-create-remainders-popup
            %label.clock{ 'for': 'reminders-contacts'}
              = inline_svg 'icons/reminder-icon-clock.svg'
            %input#reminders-contacts.show-form-create-reminders{ type: 'checkbox', ng: { model: 'showReminder' } }

            %div.wrap-form{ ng: { show: 'showReminder' } }
              #reminder_modal
                .modal-header.text-center
                  %label{'aria-hidden' => 'true', 'for' => 'reminders-contacts',  ng: { click: 'cancel()' }}
                    = inline_svg 'icons/close.svg'
                %form{ name: 'contactReminderForm',  ng: { submit: 'submitReminderForm()' } }
                  .modal-body
                    .form-group.reminder-name-wrap{ ng: { class: '{error: reminderOptions.errors.Name}' } }
                      %label.control-label{ for: 'name', ng: { class: '{error: reminderOptions.errors.Name}' }  } Reminder name*
                      %input.form-control.reminder-name{ placeholder: '', ng: { model: 'reminder.name', class: '{error: reminderOptions.errors.Name}' }, name: 'name'}

                    .form-group.reminder-date-wrap{ ng: { class: '{error: reminderOptions.errors.Date}' } }
                      %label.control-label{ for: 'date', ng: { class: '{error: reminderOptions.errors.Date}' } } Remind on date*
                      %span.bs-datepicker
                        %input.box.w4.reminder-date{ name: 'date', type: 'text', datepicker: { popup: 'MMMM d, y' }, ng: { model: 'reminder._date', required: true, click: 'callDateOpened = true', class: '{error: reminderOptions.errors.Date}' }, 'is-open': 'callDateOpened' }

                    .form-group.reminder-on-time-wrap{ ng: { class: '{error: reminderOptions.errors.Time}' } }
                      %label.control-label{ for: 'stage', ng: { class: '{error: reminderOptions.errors.Time}' }  } Remind on time*
                      %timepicker-pop.input-group.reminder-on-time{"input-time" => "reminder._time", "show-meridian" => "reminderOptions.showMeridian", ng: { class: '{ error: reminderOptions.errors.Time }' }}

                    .form-group.reminder-note-wrap
                      %label.control-label{ for: 'comment' } Reminder note
                      %textarea.form-control.reminder-note{ placeholder: '', ng: { model: 'reminder.comment' }, name: 'comment' }

                  .modal-footer.text-center
                    %button.btn.btn-primary.btn-lg.btn-add-remainder{ type: 'submit', ng: { disabled: 'reminderOptions.buttonDisabled' } } Set Reminder

          %br
          .position{ 'ng-show': 'currentContact.primary_client && currentContact.position' }
            {{ currentContact.position }}, {{ currentContact.primary_client.name }}
          .position{ 'ng-show': 'currentContact.primary_client && !currentContact.position' }
            {{ currentContact.primary_client.name }}
          .position{ 'ng-show': '!currentContact.primary_client && currentContact.position' }
            {{ currentContact.position }}
        #details
        .wells-group
          .well
            .row
              .col-xs-2
                %strong
                  Mobile
              .col-xs-10.detail
                {{ currentContact.address.mobile | tel }}
            .row
              .col-xs-2
                %strong
                  Office
              .col-xs-10.detail
                {{ currentContact.address.phone | tel }}
            .row
              .col-xs-2
                %strong
                  Email
              .col-xs-10.detail
                {{ currentContact.address.email }}
          .well
            .row
              .col-xs-2
                %strong
                  Address
              .col-xs-10.detail
                {{ currentContact.address.street1 }}
                %br
                {{ currentContact.address.city }}, {{ currentContact.address.state }}  {{ currentContact.address.zip }}
          .well
            .row
              .col-xs-2
                %strong
                  Notes
              .col-xs-10.detail
                {{ currentContact.note }}

        #activities.section
          %h2
            activities
          %div{ ng: { include: "'partials/activities_contact.html'" } }
        #activities-feed.section          
          %div{ ng: { include: "'partials/activities_feed_contact.html'" } }
