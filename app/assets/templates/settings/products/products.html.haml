.row.block
  %div.mb20
    %download-button.pull-right{'ng-click': 'exportProducts()'} Export
    %span.title Products
    %add-button.add-product{'ng-click': 'showNewProductModal()'} Add

  .table-wrapper
    %table.table.table-hover
      %thead
        %tr
          %th Name
          %th Family
          %th{ 'ng-show': 'company.product_options_enabled' } Parent Product
          %th{ 'ng-show': 'company.product_options_enabled' } Level
          %th Type
          %th Revenue Type
          %th Active
          %th Is Influencer
      %tbody{ ng: { repeat: 'product in products' } }
        %tr.clickable{'ng-click': 'expendRow(product)'}
          %td
            %i{class: 'mr8 fa fa-chevron-{{expendedRow == product.id ? "right" : "down"}}'}
            %span.mr8 {{ product.name }}
            %i.fa.fa-pencil.z-icon.edit-product{'ng-click': 'showNewProductModal(product); $event.stopPropagation()'}
          %td {{ product.product_family.name }}
          %td{ 'ng-show': 'company.product_options_enabled' } {{ product.parent.name }}
          %td{ 'ng-show': 'company.product_options_enabled' } {{ product.level }}
          %td {{ product.pricing_type.option.name }}
          %td {{ product.revenue_type }}
          %td {{ product.active ? 'Yes' : 'No' }}
          %td {{ product.is_influencer_product ? 'Yes' : 'No' }}
        %tr{'ng-show': 'expendedRow == product.id'}
          %td.auto-colspan{style: 'padding: 0'}
            %table.table.ad-unit-table
              %thead
                %tr
                  %th
                    %span.mr20 Ad units
                    %span.add-unit{'ng-click': 'showUnitModal(product)'}
                      %i.fa.fa-plus
                      Add new ad unit
              %tbody
                %tr{'ng-repeat': 'unit in productUnits[product.id]'}
                  %td
                    %span.mr8 {{unit.name}}
                    %i.fa.fa-pencil.z-icon{'ng-click': 'showUnitModal(product, unit)'}
                    %i.fa.fa-trash.z-icon{'ng-click': 'deleteUnit(product, unit)'}