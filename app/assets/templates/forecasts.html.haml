#forecasts.z-styles.z-report
	.container-fluid.inner-forecasts
		.row.mb20
			.reports-header
				.header-cell.main-title
					Forecast
				.header-cell.filters-block
					%table
						%tr.filter-title
							%td Team
							%td Seller
							%td Product
							%td
								%span.reset-filter{'ng-click': 'resetFilter()'}
									Reset
						%tr
							%td
								%tree-dropdown{ class:"tree-dropdown team-list", data:"teams", selected: 'filter.team', 'ng-class': '{"empty": filter.team.name === "All"}'}

							%td
								%ul.filter-item
									%li{ dropdown: true }
										%a{ href: '', dropdown: { toggle: true }, 'ng-class': '{"empty": !filter.seller.id}' }
											{{filter.seller.name}}
											%span.caret
										%ul.dropdown-menu
											%li{'ng-class': '{active: !filter.seller.id}'}
												%a{href: '', 'ng-click': 'setFilter("seller", emptyFilter)'}
													{{emptyFilter.name}}
											%li{ ng: { repeat: 'seller in sellers | orderBy : "name"', class: '{active: seller.id === filter.seller.id}' } }
												%a{ href: '', ng: { click: 'setFilter("seller", seller)' } }
													{{seller.name}}

							%td
								%ul.filter-item
									%li{ dropdown: true }
										%a{ href: '', dropdown: { toggle: true }, 'ng-class': '{"empty": !filter.product.id}' }
											{{filter.product.name}}
											%span.caret
										%ul.dropdown-menu
											%li{'ng-class': '{active: !filter.product.id}'}
												%a{href: '', 'ng-click': 'setFilter("product", emptyFilter)'}
													{{emptyFilter.name}}
											%li{ ng: { repeat: 'product in products | orderBy : "name"', class: '{active: product.id === filter.product.id}' } }
												%a{ href: '', ng: { click: 'setFilter("product", product)' } }
													{{product.name}}

		.row.mb20
			.col-xs-9.pl0
				.block
					%div.mb20
						%span.title Pipeline & Revenue Pacing
					.table-wrapper
						%table.table.table-hover
							%tbody
								%tr.header-row
									%th
										%b Weighted Pipe
									%th{'ng-repeat': 'week in weeks'}
										Week {{week <= weekShift ? week - weekShift - 1 : week - weekShift}}
							%tbody{'ng-show': 'pipelineRevenue.weighted_pipeline'}
								%tr
									%td This Qtr
									%td{'ng-repeat': 'val in pipelineRevenue.weighted_pipeline.current_quarter track by $index'}
										{{isNumber(val) ? (val | currency: '$' : '0') : '-'}}
			.col-xs-3.pr0
				.block
					%div.mb20
						%span.title Forecast Insights
					%h5 Pipeline Concentration Risk
					%table.table.table-stripped.mb10
						%thead
							%tr
								%th % of Deals
								%th % Total Pipe Value
								%th # Deals
						%tbody
							%tr
								%td 20%
								%td -50%-------------
								%td 5
							%tr
								%td 30%
								%td -75%-------------
								%td 10
							%tr
								%td 50%
								%td -100%------------
								%td 20

					%h5 Deals Missing IOs
					%table.table.table-stripped.mb10
						%thead
							%tr
								%th # Deals
								%th Value
						%tbody
							%tr
								%td 3
								%td {{200000 | currency : '$' : 0}}
							%tr
								%td 5
								%td {{450000 | currency : '$' : 0}}

					%h5 Underdelivery (UD) Risk
					%table.table.table-stripped.mb10
						%thead
							%tr
								%th # Lines
								%th UD Risk Amount
						%tbody
							%tr
								%td 5
								%td {{100000 | currency : '$' : 0}}
							%tr
								%td 10
								%td {{300000 | currency : '$' : 0}}