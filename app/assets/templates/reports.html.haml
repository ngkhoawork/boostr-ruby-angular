#reports.z-styles.z-report
  .container-fluid
    .row.mb20
      .reports-header
        .header-cell.main-title
          Activity Summary
        .header-cell.filters-block
          %table
            %tr.filter-title
              %td Team
              %td User Type
              %td Time period
              %td
                %span.reset-filter{'ng-click': 'resetFilter()'}
                  Reset
            %tr
              %td
                %tree-dropdown{ class:"tree-dropdown team-list", data:"teams", selected: 'filter.team', 'ng-class': '{"empty": filter.team.name === "All"}'}
              %td
                %ul.filter-item
                  %li{ dropdown: true }
                    %a{ href: '', dropdown: { toggle: true }, 'ng-class': '{"empty": !filter.userType.id}' }
                      {{filter.userType.name}}
                      %span.caret
                    %ul.dropdown-menu
                      %li{'ng-class': '{active: !filter.userType.id}'}
                        %a{href: '', 'ng-click': 'setFilter("userType", emptyFilter)'}
                          {{emptyFilter.name}}
                      %li{ ng: { repeat: 'userType in userTypes | orderBy : "name"', class: '{active: userType.id === filter.userType.id}' } }
                        %a{ href: '', ng: { click: 'setFilter("userType", userType)' } }
                          {{userType.name}}
              %td
                .date-picker-wrap
                  %div.date-picker{'date-range-picker': true,
                                     'ng-model': 'filter.date',
                                     :options => "{locale: {format: 'MMMM D, YYYY'},
                                         eventHandlers: {'apply.daterangepicker': datePicker.apply}}"}
                    %span.empty{'ng-hide': 'datePicker.toString("date")'}
                      Time period
                      %span.caret
                    %span{'ng-show': 'datePicker.toString("date")'}
                      {{datePicker.toString("date")}}
                      %span.caret

        .header-cell
          %button.add-btn{'ng-click': 'applyFilter()', 'ng-class': '{highlighted: isFilterApplied()}'}
            Run Report

        .header-cell
          .pull-right
            .header-cell-right
              %download-button{'ng-click': 'exportReports()'}
                Export

    .row
      .col-md-12
        .block
          .table-wrapper
            %table.table.table-hover
              %thead
                %tr{'z-fixed-header': true, watch: '["types", "userReportValues"]'}
                  %th.left
                    %span.clickable{ 'ng-click': 'changeSortType("username")'}
                      Name
                  %th{ ng: { repeat: 'type in types track by $index' } }
                    %span.clickable{'ng-click': 'changeSortType("\"" + type.name + "\"")'}
                      {{ type.name }}
                  %th.text--bold
                    %span.clickable{ 'ng-click': 'changeSortType("total")'}
                      Total

              %tbody
                %tr{ ng: { repeat: 'report in userReportValues | orderBy:sortType:sortReverse' } }
                  %td.left {{ report.username }}
                  %td{'ng-repeat': 'type in types'}
                    %a{'ng-click': 'showActivityDetailModal(report.user_id, type.id)'}
                      {{report[type.name]}}
                  %td.text--bold
                    %a{'ng-click': 'showActivityDetailModal(report.user_id, null)'}
                      {{report['total']}}

                %tr.text--bold
                  %td.left Total
                  %td{'ng-repeat': 'type in types'}
                    %a{'ng-click': 'showActivityDetailModal(null, type.id)'}
                      {{total_activities[type.name]}}
                  %td
                    %a{'ng-click': 'showActivityDetailModal(null, null)'}
                      {{total_activities['total']}}
