#clients
  #nav
    .container
      .row
        .col-xs-12
          %ul.nav.nav-tabs
            %li.pull-right.last
              %a.upload{ href: '', ng: { click: 'showModal()' } }
                = inline_svg 'add.svg'
                New Client

  .container
    .row
      .col-xs-6
        .search
      .col-xs-6

    .row
      #client-list.col-xs-5
        .list-group.list-lg
          %a.list-group-item.vertical-center{href: '/#clients/{{ client.id }}', ng: { repeat: 'client in clients | orderBy: "name"', class: '{ active: client.id == currentClient.id }' } }
            .col-xs-8.col-xs-offset-4
              .row
                %h4
                  {{ client.name }}
              .row
                13 people   3 deals
      #client-detail.col-xs-7
        .tools.pull-right
          %a#delete-client{ href: '', ng: { click: 'delete()' } }
            = inline_svg 'trash.svg'
          %a#edit-client{ href: '', ng: { click: 'showEditModal()' } }
            = inline_svg 'edit.svg'
        %h2.client-name
          {{ currentClient.name }}
          %br
          .location
            {{ currentClient.address.city }}, {{ currentClient.address.state}}
        #details
          .wells-group
            .well
              .row
                .col-xs-2
                  %strong
                    Office
                .col-xs-10.detail
                  {{ currentClient.address.phone | tel }}
              .row
                .col-xs-2
                  %strong
                    Email
                .col-xs-10.detail
                  {{ currentClient.address.email }}
            .well
              .row
                .col-xs-2
                  %strong
                    Address
                .col-xs-10.detail
                  {{ currentClient.address.street1 }}
                  %br
                  {{ currentClient.address.city }}, {{ currentClient.address.state }}  {{ currentClient.address.zip }}
            .well
              .row
                .col-xs-2
                  %strong
                    Website
                .col-xs-10.detail
                  %a{ ng: { href: 'http://{{ currentClient.website }}' }, target: '_blank' }
                    {{ currentClient.website }}
            .well
              .row
                .col-xs-2
                  %strong
                    Client Type
                .col-xs-10.detail
                  {{ currentClient.client_type }}

        #people
          %span.pull-right{ dropdown: true, 'dropdown-append-to-body': true, 'auto-close': 'outsideClick'  }
            %a.add-contact{ href: '', dropdown: { toggle: true }}
              = inline_svg 'add.svg'
            %ul.dropdown-menu.new-contact-options
              %li
                %a.new-person{ href: '', ng: { click: 'showNewPersonModal()' } }
                  Add New Person
              %li
                %a.existing-contact{ href: '', ng: { click: 'showLinkExistingPerson()' } }
                  Link Existing Person
              %li.existing-contact-options{ ng: { show: 'showContactList' } }
                %ui-select{ name: 'contact-list', ng: { model: 'contactToLink', disabled: true }, 'append-to-body': 'true', 'on-select': 'linkExistingPerson($item, $model)' }
                  %ui-select-match{ placeholder: 'start typing their name here' }
                    {{ $select.selected.name }}
                  %ui-select-choices{ repeat: 'contact in contacts | filter: { name: $select.search }' }
                    %div{ ng: { bind: { html: 'contact.name' } } }

          %h2
            people

          .wells-group
            .well{ ng: { repeat: 'contact in currentClient.contacts', click: 'go("/people/" + contact.id)' } }
              .row
                .col-xs-10
                  .row
                    .col-xs-12
                      %strong
                        {{ contact.name }}, {{ contact.position }}
                  .row
                    .col-xs-12
                      {{ contact.address.email }} {{ contact.address.mobile | tel }}
                .col-xs-2
                  = inline_svg 'right-caret.svg', class: 'pull-right'


          #teamsplits
            %span.pull-right
              %a.new-member{ href: '', ng: { click: 'showNewMemberModal()' } }
                = inline_svg 'add.svg'

            %h2
              default team & split

            .table-wrapper
              %table.table.table-striped
                %thead
                  %tr
                    %th Member
                    %th Share
                    %th Role
                %tbody
                  %tr{ ng: { repeat: 'client_member in client_members' } }
                    %td {{ client_member.user.first_name }} {{ client_member.user.last_name }}
                    %td {{ client_member.share }}%
                    %td {{ client_member.role }}
