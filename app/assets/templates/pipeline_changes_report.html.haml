#reports
  .container-fluid.table-report
    .row
      .col-xs-12
        .reports-header
          .header-cell
            .h3.header-title
              Pipeline Change Report
          .header-cell
            .filters-block
              %span.filter-block-label Filter By:
              .date-picker-wrap
                %div.date-picker#pipeline-change-date-picker{'date-range-picker': true,
                                                     'ng-model': 'datePicker',
                                                     :options => "{locale: {format: 'MMMM D, YYYY',
                                                                            cancelLabel: 'Clear'},
                                                                   eventHandlers: {'apply.daterangepicker': datePickerApply,
                                                                                   'cancel.daterangepicker': datePickerCancel}}"}
                  Time period
                %span.caret
              %span#reset-pipeline-filter.mr20{'ng-click': 'resetFilters()'}
                Reset

          .header-cell
            %button.add-btn{'ng-click': 'applyFilter()'}
              Run Report

              -#%a.pull-right{ href: '', ng: { click: 'exportReports()' } }
              -#  = inline_svg 'icons/export.svg'
              -#  Export
    .row
      .col-md-12
        .table-wrapper
          %table.table
            %thead
              -#%tr{'z-fixed-header': true, watch: '"report_data_items"'}
              %tr
                %th.left{ width: "200" }
                  %a{href:"javascript:void(0)", 'ng-click': 'changeSortType("date")'}
                    Date
                %th.left{ width: "200" }
                  %a{href:"javascript:void(0)", 'ng-click': 'changeSortType("deal_type")'}
                    Change type
                %th.left{ width: "150" }
                  %a{href:"javascript:void(0)", 'ng-click': 'changeSortType("name")'}
                    Deal name
                %th.left{ width: "150" }
                  %a{href:"javascript:void(0)", 'ng-click': 'changeSortType("advertiser_name")'}
                    Advertiser name
                %th.right{ width: "100" }
                  %a{href:"javascript:void(0)", 'ng-click': 'changeSortType("budget")'}
                    Deal budget
                %th.left{ width: "150" }
                  %a{href:"javascript:void(0)", 'ng-click': 'changeSortType("start_date")'}
                    Deal start date
                %th.left{ width: "150" }
                  %a{href:"javascript:void(0)", 'ng-click': 'changeSortType("stage_name")'}
                    Stage name
                %th.left{ width: "200" }
                  %a{href:"javascript:void(0)", 'ng-click': 'changeSortType("previous_stage")'}
                    Previous stage
                %th.left{ width: "200" }
                  %a{href:"javascript:void(0)", 'ng-click': 'changeSortType("budget_change")'}
                    Budget change
            %tbody
              %tr{ ng: { repeat: 'deal in report_data_items | orderBy:sortType:sortReverse' } }
                %td.left
                  {{ deal.date | date: 'MM-dd-yyyy' }}
                %td.left
                  {{ deal.deal_type }}
                %td.left
                  %a{ href: '', ng: { click: 'go("/deals/" + deal.id)'  } }
                    {{ deal.name }}
                %td.left
                  {{ deal.advertiser_name }}
                %td.right
                  {{ deal.budget | currency:'$':0 }}
                %td.left
                  {{ deal.start_date | date: 'MM-dd-yyyy' }}
                %td.left
                  {{ deal.stage_name }}
                %td.left
                  {{ deal.previous_stage }}
                %td.left
                  {{ deal.budget_change | currency:'$':0 }}
