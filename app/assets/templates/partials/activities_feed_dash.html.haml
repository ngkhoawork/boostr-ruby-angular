#activities-feed.table-wrapper
  %table.table.table-striped.black-table
    %thead
      %tr
        %th.left.pad4 {{ feedName }}
    %tbody
      %tr.feed-repeat{ ng: { repeat: "(key, object) in activity_objects | orderBy: '-activity_updated_at'"} }
        %td
          %table.table.table-striped.black-table
            %thead
              %tr{ ng: { click: 'object.show = !object.show' } }
                %th.left.pad4
                  .col-xs-11
                    %a{ href: '', ng: { href: '/deals/{{object.id}}', if: 'object.isDeal' } }
                      {{ object.name }}
                    %a{ href: '', ng: { href: '/people/{{object.id}}', if: 'object.isContact' } }
                      {{ object.name }}
                    %a{ href: '', ng: { href: '/clients', if: 'object.isClient' } }
                      {{ object.name }}
                  .col-xs-1.text-right
                    %a{ href: '' }
                      %i.fa{ 'ng-class': '{ "fa-plus": !object.show, "fa-minus": object.show }' }
            %tbody{ ng: { show: 'object.show' } }
              %tr{ ng: { repeat: "activity in object.activities | orderBy: '-happened_at' | limitTo:object.currentLimit"} }
                %td
                  .col-xs-2.pad1
                    .row.act
                      {{ activity.happened_at | date: 'shortDate' }}
                  .col-xs-1.pad2
                    %img.s-img{:src => "{{ getType(activity.activity_type_name).icon }}"}/
                  .col-xs-9.pad3
                    .row.act
                      %span
                        {{ activity.creator.first_name }} {{ activity.creator.last_name }} 
                      {{ getType(activity.activity_type_name).action }}
                      %span
                        {{ activity.contact.name }}
                    .row
                      {{ activity.comment }}
