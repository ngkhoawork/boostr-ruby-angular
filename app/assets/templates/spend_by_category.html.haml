#spend-by-category.z-styles
  .container-fluid
    .row.mb20
      .reports-header
        .header-cell.main-title
          Spend By Category
        .header-cell.filter-cell
          %z-filter{'on-apply': 'onFilterApply'}
            %z-filter-field{data: 'categories', type: 'multiselect', 'save-as': '{"category_ids[]": "id"}', id: 'category-field'} Category
            %z-filter-field{type: 'daterange', 'save-as': '{start_date: "startDate", end_date: "endDate"}', id: 'time-period-field'} Time period
            %z-filter-field{data: 'regions', type: 'multiselect', 'save-as': '{"client_region_ids[]": "id"}'} Region
            %z-filter-field{data: 'segments', type: 'multiselect', 'save-as': '{"client_segment_ids[]": "id"}'} Segment

        .header-cell
          .pull-right
            %download-button{'ng-click': 'export($event)'}
              Export

    .row
      .col-xs-12
        .block
          %div.table-wrapper
            %table.table.table-hover.exportable-table
              %thead
                / %tr.hide
                /   -#title for export
                /   %th Revenue Details
                %tr.z-sortable-prime{'sort-name': 'spends', 'z-fixed-header': true, watch: '["spends", "spend_months"]'}
                  %th
                    .z-sortable{by: 'name', default: true} Category
                  %th
                    .z-sortable{by: 'year'} Year
                  %th
                    .z-sortable{by: 'total_revenue'} Total Revenue
                  / %th
                  /   .z-sortable{by: 'agency.name'} Agency
                  / %th
                  /   .z-sortable{by: 'members'} Team
                  / %th
                  /   .z-sortable{by: 'start_date'} Start Date
                  / %th
                  /   .z-sortable{by: 'end_date'} End Date
                  / %th{'ng-repeat': '(index, key) in spend_months'}
                  /   .z-sortable{by: 'getSortableAmountKey("revenues", index)'} {{key}}
              %tbody
                %tr{'ng-repeat': 'spend in spends | orderBy : zSort.spends.by : zSort.spends.rev'}
                  %td {{ spend.name }}
                  %td {{ spend.year }}
                  %td {{ spend.total_revenue | currency : '$' : 0 }}
                /   %td {{revenue.advertiser.name}}
                /   %td {{revenue.agency.name}}
                /   %td
                /     %div{'ng-repeat': 'member in revenue.members'} {{member.user.first_name + ' ' + member.user.last_name}} {{member.share}}%
                /   %td {{revenue.start_date | date : 'MM/dd/yyyy'}}
                /   %td {{revenue.end_date | date : 'MM/dd/yyyy'}}
                /   %td {{revenue.budget | currency : '$' : 2}}
                /   %td {{revenue.in_period_split_amt | currency : '$' : 2}}
                /   %td{'ng-repeat': 'amount in revenue.quarters track by $index', 'ng-if': 'switch.revenues == "quarters" && amount != null'}
                /     {{amount | currency : '$' : 2}}
                /   %td{'ng-repeat': 'amount in revenue.months track by $index', 'ng-if': 'switch.revenues == "months" && amount != null'}
                /     {{amount | currency : '$' : 2}}
                / %tr{ ng: { if: 'revenues.length == 0' }}
                /   %td.center.auto-colspan
                /     No Data for the Filters Selected
